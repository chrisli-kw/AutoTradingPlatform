# 📬 TelegramBot 指令功能說明（`handle_msg`）

此區塊列出 `handle_msg` 函式目前所支援的所有訊息類型，並對應執行的交易控制行為。所有指令需包含帳戶名稱（如 `chrisli_1`），否則會被忽略。

---

## 🧾 指令功能對照表

| 指令訊息（關鍵詞）       | 觸發條件                                  | 說明                                               | 範例                                                 |
| ------------------------ | ----------------------------------------- | -------------------------------------------------- | ---------------------------------------------------- |
| `暫停交易` 或 `暫停監控` | 訊息中包含這些字詞，且包含 `account_name` | 設定 `pause_flag`，暫停執行交易邏輯                | `/account_name_暫停交易`                             |
| `繼續交易` 或 `繼續監控` | 訊息中包含這些字詞，且包含 `account_name` | 清除 `pause_flag`，恢復執行交易邏輯                | `/account_name_繼續監控`                             |
| `停止交易` 或 `停止監控` | 訊息中包含這些字詞，且包含 `account_name` | 設定 `stop_flag`，結束監控，準備關閉程式           | `/account_name_停止交易`                             |
| `監控狀態`               | 訊息中包含此字詞，且包含 `account_name`   | 回覆目前交易狀態：「交易中」「暫停中」或「已關閉」 | `/account_name_監控狀態`                             |
| `目前部位` 或 `當前部位` | 訊息中包含這些字詞，且包含 `account_name` | 查詢資料庫，回傳帳號目前持倉資訊                   | `/account_name_目前部位`<br>`/account_name_當前部位` |

---

## ⚙️ 特殊邏輯提醒

- **所有指令必須包含帳號名稱（`self.account_name`）**，否則訊息不會被處理：
  ```python
  if self.account_name not in msg:
      return
  ```

---

## 💬 指令範例與行為說明

### 1. ✅ 暫停交易

**輸入：**
```
/account_name_暫停交易
```

**機器人回覆：**
```
🛑 已暫停監控
```

---

### 2. ✅ 繼續監控

**輸入：**
```
/account_name_繼續監控
```

**機器人回覆：**
```
✅ 已恢復監控
```

---

### 3. ✅ 停止交易

**輸入：**
```
/account_name_停止交易
```

**機器人回覆：**
```
❌ 程式即將停止
```

---

### 4. ✅ 查詢交易狀態

**輸入：**
```
/account_name_監控狀態
```

**依據狀態回覆：**
- `✅ 交易中`
- `🛑 暫停交易中`
- `❌ 已關閉`

---

### 5. ✅ 查詢目前持倉部位

**輸入：**
```
/account_name_當前部位
```
或
```
/account_name_目前部位
```

**機器人回覆：**
```json
{'TXF': 2, 'MTX': 5}
```
